# Generated by chezmoi from data/env.yaml. Edit data/env.yaml instead.

# Common environment variables for POSIX shells (sh/bash/dash/ksh)

# Ensure user bin comes first if present
if [ -d "{{ (joinPath .chezmoi.home .data.env.paths.user_bin | replace "~" .chezmoi.home) }}" ]; then
  PATH="{{ (joinPath .chezmoi.home .data.env.paths.user_bin | replace "~" .chezmoi.home) }}:$PATH"
fi

# SSH agent via systemd user socket
export SSH_AUTH_SOCK="${SSH_AUTH_SOCK:-$XDG_RUNTIME_DIR/ssh-agent.socket}"

# NPM global bin (if used)
export PATH="{{ (joinPath .chezmoi.home .data.env.paths.npm_global_bin | replace "~" .chezmoi.home) }}:$PATH"

# Locale and editor (avoid global LC_ALL; set LANG with fallbacks)
if [ -z "${LANG:-}" ]; then
  if command -v locale >/dev/null 2>&1 && locale -a 2>/dev/null | grep -qiE '^{{ (printf "%s" .data.env.locale_preferred | lower | replace "." "\\." ) }}$'; then
    export LANG='{{ .data.env.locale_preferred }}'
  elif command -v locale >/dev/null 2>&1 && locale -a 2>/dev/null | grep -qi '^C\.UTF-8$'; then
    export LANG='C.UTF-8'
  else
    export LANG='C'
  fi
fi
export EDITOR="${EDITOR:-{{ .data.env.editor }}}"

# Python environment variables
export PYTHONDONTWRITEBYTECODE=1
export PYTHONUNBUFFERED=1

# Node environment variables
export NODE_ENV='{{ .data.env.node_env }}'

# Custom application settings
export OLLAMA_ORIGINS='{{ .data.env.ollama_origins }}'

# GTK Scale
export SWT_GTK3='{{ .data.env.gtk.swt_gtk3 }}'
export GDK_SCALE='{{ .data.env.gtk.gdk_scale }}'
export GDK_DPI_SCALE='{{ .data.env.gtk.gdk_dpi_scale }}'

# Storage / NAS
export STORAGE_IP='{{ .data.env.storage.ip }}'
export STORAGE_NAME='{{ .data.env.storage.name }}'
